{% extends "dashboard/base.html" %}
{% load static %}
{% block title %}Prestations{% endblock title %}

{% block body %}
<div class="wrapper">
  <!-- Sidebar  -->
  {% include "dashboard/inclusions/sidebar.html" %}
  <!-- Page Content  -->
  <div id="content">
    {% include "dashboard/inclusions/header.html" %}
    
    <section class="component pb-5">
        <div class="section-header pb-5">
            <h2 class="titre-section">Prestations</h2>
            <div class="">
                <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link active" id="pills-day-tab" data-toggle="pill" href="#pills-day" role="tab" aria-controls="pills-day" aria-selected="true">Ajourd'hui</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="pills-mois-tab" data-toggle="pill" href="#pills-mois" role="tab" aria-controls="pills-mois" aria-selected="false">Mois</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="pills-year-tab" data-toggle="pill" href="#pills-year" role="tab" aria-controls="pills-year" aria-selected="false">Année</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="pills-all-tab" data-toggle="pill" href="#pills-all" role="tab" aria-controls="pills-all" aria-selected="false">Tout</a>
                    </li>
                </ul>
                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active mb-4" id="pills-day" role="tabpanel" aria-labelledby="pills-day-tab">
                        <div class="containeurs">
                            {% if lst_prest_j %}
                            <table class="table table-responsive table-striped">
                                <thead class="thead">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Client</th>
                                        <th scope="col">Montant</th>
                                        <th scope="col">Vendeur</th>
                                        <th scope="colg">Date</th>
                                        <th scope="colg" colspan="2">Détails</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for pres in lst_prest_j %}
                                        <tr>
                                            <th scope="row">{{forloop.counter}}</th>
                                            <td>{{pres.client}}</td>
                                            <td>{{pres.total_prestation|floatformat:-2}} FCFA</td>
                                            <td>{{pres.gerant}}</td>
                                            <td>{{pres.date_prestation|date:"d F Y"}} à {{pres.date_prestation|date:"G\hi"}}</td>
                                            <td><a href="{% url 'details_prestation_pnl' pres.point_vente.id pres.id %}" title="Détails"><i class="bi bi-info-circle info"></i></a></td>
                                            <td><a href="{% url 'retirer_prestation_p' pres.id %}" title="Supprimer définitivement"><i class="bi bi-x-circle delete" id="btnSupVte"></i></a></td>
                                    {% endfor %}
                                        
                                </tbody>
                            </table>
                            {% else %}
                                <br>
                                <p class="alert alert-info text-center">Aucune prestation disponible pour le moment.</p>
                            {% endif%}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pills-mois" role="tabpanel" aria-labelledby="pills-mois-tab">
                        <div class="containeurs">
                            {% if lst_prest_m %}
                            <table class="table table-responsive table-striped">
                                <thead class="thead">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Client</th>
                                        <th scope="col">Montant</th>
                                        <th scope="col">Vendeur</th>
                                        <th scope="colg">Date</th>
                                        <th scope="colg" colspan="2">Détails</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for pres in lst_prest_m %}
                                        <tr>
                                            <th scope="row">{{forloop.counter}}</th>
                                            <td>{{pres.client}}</td>
                                            <td>{{pres.total_prestation|floatformat:-2}} FCFA</td>
                                            <td>{{pres.gerant}}</td>
                                            <td>{{pres.date_prestation|date:"d F Y"}} à {{pres.date_prestation|date:"G\hi"}}</td>
                                            <td><a href="{% url 'details_prestation_pnl' pres.point_vente.id pres.id %}" title="Détails"><i class="bi bi-info-circle info"></i></a></td>
                                            <td><a href="{% url 'retirer_prestation_p' pres.id %}" title="Supprimer définitivement"><i class="bi bi-x-circle delete" id="btnSupVte"></i></a></td>
                                    {% endfor %}
                                        
                                </tbody>
                            </table>
                            {% else %}
                                <br>
                                <p class="alert alert-info text-center">Aucune prestation disponible pour le moment.</p>
                            {% endif%}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pills-year" role="tabpanel" aria-labelledby="pills-year-tab">
                        <div class="containeurs">
                            {% if lst_prest_a %}
                            <table class="table table-responsive table-striped">
                                <thead class="thead">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Client</th>
                                        <th scope="col">Montant</th>
                                        <th scope="col">Vendeur</th>
                                        <th scope="colg">Date</th>
                                        <th scope="colg" colspan="2">Détails</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for pres in lst_prest_a %}
                                        <tr>
                                            <th scope="row">{{forloop.counter}}</th>
                                            <td>{{pres.client}}</td>
                                            <td>{{pres.total_prestation|floatformat:-2}} FCFA</td>
                                            <td>{{pres.gerant}}</td>
                                            <td>{{pres.date_prestation|date:"d F Y"}} à {{pres.date_prestation|date:"G\hi"}}</td>
                                            <td><a href="{% url 'details_prestation_pnl' pres.point_vente.id pres.id %}" title="Détails"><i class="bi bi-info-circle info"></i></a></td>
                                            <td><a href="{% url 'retirer_prestation_p' pres.id %}" title="Supprimer définitivement"><i class="bi bi-x-circle delete" id="btnSupVte"></i></a></td>
                                    {% endfor %}
                                        
                                </tbody>
                            </table>
                            {% else %}
                                <br>
                                <p class="alert alert-info text-center">Aucune prestation disponible pour le moment.</p>
                            {% endif%}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pills-all" role="tabpanel" aria-labelledby="pills-all-tab">
                        <div class="containeurs">
                            {% if lst_prest %}
                            <table class="table table-responsive table-striped">
                                <thead class="thead">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Client</th>
                                        <th scope="col">Montant</th>
                                        <th scope="col">Vendeur</th>
                                        <th scope="colg">Date</th>
                                        <th scope="colg" colspan="2">Détails</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for pres in lst_prest %}
                                        <tr>
                                            <th scope="row">{{forloop.counter}}</th>
                                            <td>{{pres.client}}</td>
                                            <td>{{pres.total_prestation|floatformat:-2}} FCFA</td>
                                            <td>{{pres.gerant}}</td>
                                            <td>{{pres.date_prestation|date:"d F Y"}} à {{pres.date_prestation|date:"G\hi"}}</td>
                                            <td><a href="{% url 'details_prestation_pnl' pres.point_vente.id pres.id %}" title="Détails"><i class="bi bi-info-circle info"></i></a></td>
                                            <td><a href="{% url 'retirer_prestation_p' pres.id %}" title="Supprimer définitivement"><i class="bi bi-x-circle delete" id="btnSupVte"></i></a></td>
                                    {% endfor %}
                                        
                                </tbody>
                            </table>
                            {% else %}
                                <br>
                                <p class="alert alert-info text-center">Aucune prestation disponible pour le moment.</p>
                            {% endif%}
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </section>
    </div>
</div>
{% endblock body %}