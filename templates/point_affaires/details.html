{% extends "dashboard/base.html" %} {% load static %} {% block title %}Détails
de {{pt.nom}}{% endblock title %} {% block body %}
<div class="wrapper">
  <!-- Sidebar  -->
  {% include "dashboard/inclusions/sidebar.html" %}

  <!-- Page Content  -->
  <div id="content">
    {% include "dashboard/inclusions/header.html" %}

    <section class="component pb-5">
      <div class="section-header pb-5">
        <h2 class="titre-section">{{pt.nom}}</h2>
      </div>
      <div class="container-fluid">
        <div>
          <div class="row gy-4">
            <div class="col-lg-6 col-md-6">
              <div class="gauche-point">
                <header class="section-header">
                  <h4 class="text-left stitre" style="color: #555">
                    Informations générales
                  </h4>
                </header>
                <br />
                <section id="counts" class="counts">
                  <div class="row gy-4">
                    <div class="col-lg-6 col-md-6">
                      <div class="count-box">
                        <i
                          class="bi bi-archive lico"
                          style="color: #4154f1"
                        ></i>
                        <div>
                          {% if nb_vte %}
                          <span>{{nb_vte}}</span>
                          {% if nb_vte <= 1 %}
                          <p style="font-size: 13px">Vente</p>
                          {% else %}
                          <p style="font-size: 13px">Ventes</p>
                          {% endif %} {% else %}
                          <span>--</span>
                          <p style="font-size: 13px">Vente</p>
                          {% endif %}
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-6 col-md-6">
                      <div class="count-box">
                        <i class="bi bi-heart lico" style="color: #ee6c20"></i>
                        <div>
                          {% if nb_prest %}
                          <span>{{nb_prest}}</span>
                          {% if nb_prest <= 1 %}
                          <p style="font-size: 13px">Service presté</p>
                          {% else %}
                          <p style="font-size: 13px">Services prestés</p>
                          {% endif %} {% else %}
                          <span>--</span>
                          <p style="font-size: 13px">Service presté</p>
                          {% endif %}
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-6 col-md-6">
                      <div class="count-box">
                        <i
                          class="bi bi-person-lines-fill lico"
                          style="color: #15be56"
                        ></i>
                        <div>
                          {% if nb_clt %}
                          <span>{{nb_clt}}</span>
                          {% if nb_clt <= 1 %}
                          <p style="font-size: 13px">Client</p>
                          {% else %}
                          <p style="font-size: 13px">Clients</p>
                          {% endif %} {% else %}
                          <span>--</span>
                          <p style="font-size: 13px">Client</p>
                          {% endif %}
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-6 col-md-6">
                      <div class="count-box">
                        <i class="bi bi-people lico" style="color: #bb0852"></i>
                        <div>
                          {% if nb_user %}
                          <span>{{nb_user}}</span>
                          {% if nb_user <= 1 %}
                          <p style="font-size: 13px">Vendeur</p>
                          {% else %}
                          <p style="font-size: 13px">Vendeurs</p>
                          {% endif %} {% else %}
                          <span>--</span>
                          <p style="font-size: 13px">Vendeur</p>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                  <br />
                  <div class="row gy-4">
                    <div class="col-lg-6 col-md-6">
                      <div class="count-box">
                        <i class="bi bi-heart lico" style="color: #2db6fa"></i>
                        <div>
                          {% if nb_serv %}
                          <span>{{nb_serv}}</span>
                          {% if nb_serv <= 1 %}
                          <p style="font-size: 13px">Service disponible</p>
                          {% else %}
                          <p style="font-size: 13px">Services disponibles</p>
                          {% endif %} {% else %}
                          <span>--</span>
                          <p style="font-size: 13px">Services disponibles</p>
                          {% endif %}
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-6 col-md-6">
                      <div class="count-box">
                        <i
                          class="bi bi-archive lico"
                          style="color: #e3687d"
                        ></i>
                        <div>
                          {% if nb_prod %}
                          <span>{{nb_prod}}</span>
                          {% if nb_prod <= 1 %}
                          <p style="font-size: 13px">Produit disponible</p>
                          {% else %}
                          <p style="font-size: 13px">Produits disponibles</p>
                          {% endif %} {% else %}
                          <span>--</span>
                          <p style="font-size: 13px">Produit disponible</p>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
            </div>

            <div class="col-lg-6 col-md-6">
              <header class="section-header">
                <h4 class="text-right stitre" style="color: #555">
                  Produits disponibles
                </h4>
              </header>
              <br />
              <div class="container containeurs">
                {% if lst_prod %}
                <table class="table table-responsive">
                  <tbody>
                    {% for prod in lst_prod %} {% load app_filter %}
                    <tr>
                      <th scope="row">{{forloop.counter}}</th>
                      <td>{{prod.designation|truncatewords:1}}</td>
                      <td>{{pt.nom|filter_prod:prod.id}}</td> 
                      <td>{{prod.prix_unitaire|floatformat:-2}}</td>
                      <td>
                        <a
                          href="{% url 'details_prod' prod.id %}"
                          title="Détails de {{prod.designation}}"
                          ><i class="bi bi-info-circle info"></i
                        ></a>
                      </td>
                      <td>
                        <a
                          href="{% url 'update_qte' prod.id %}"
                          title="Modifier la quantité"
                          ><i class="bi bi-pencil-square edit"></i
                        ></a>
                      </td>
                      <td>
                        <a
                          href="{% url 'retirer_produit' pt.id prod.id %}"
                          title="Retirer du point de vente"
                          ><i class="bi bi-x-circle delete"></i
                        ></a>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                {% else %}
                <br />
                <p class="alert alert-info text-center">
                  Aucun produit disponible pour le moment.
                </p>
                {% endif %}
              </div>
            </div>

            <div class="col-lg-6 col-md-6">
              <br />
              <header class="section-header">
                <h4 class="text-right stitre" style="color: #555">
                  Services disponibles
                </h4>
              </header>
              <div class="container containeurs">
                {% if lst_serv %}
                <table class="table table-responsive">
                  <tbody>
                    {% for serv in lst_serv %}
                    <tr>
                      <th scope="row">{{forloop.counter}}</th>
                      <td>{{serv.nom}}</td>
                      <td>{{serv.categorie}}</td>
                      <td>
                        <a
                          href="{% url 'details_service' serv.id %}"
                          title="Détails de {{serv.nom}}"
                          ><i class="bi bi-info-circle info"></i
                        ></a>
                      </td>
                      <td>
                        <a
                          href="{% url 'retirer_service' pt.id serv.id %}"
                          title="Retirer du point de vente"
                          ><i class="bi bi-x-circle delete"></i
                        ></a>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                {% else %}
                <br />
                <p class="alert alert-info text-center">
                  Aucun service disponible pour le moment.
                </p>
                {% endif %}
              </div>
            </div>

            <div class="col-lg-6 col-md-6">
              <br />
              <header class="section-header">
                <h4 class="text-right stitre" style="color: #555">Vendeurs</h4>
              </header>
              <div class="container containeurs">
                {% if lst_user %}
                <table class="table table-responsive">
                  <tbody>
                    {% for user in lst_user %}
                    <tr>
                      <th scope="row">{{forloop.counter}}</th>
                      <td>{{user.user.last_name|truncatewords:1}}</td>
                      <td>{{user.user.first_name}}</td>
                      <td>{{user.telephone}}</td>
                      <td>
                        <a
                          href="{% url 'details_gerant' user.id %}"
                          title="Détails de {{user.user.last_name}} {{user.user.first_name}}"
                          ><i class="bi bi-info-circle info"></i
                        ></a>
                      </td>
                      <td>
                        <a
                          href="{% url 'update_point_gerant' user.id %}"
                          title="Modifier le point de vente"
                          ><i class="bi bi-slash-circle edit"></i
                        ></a>
                      </td>
                      <!-- Scrollable modal -->
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                {% else %}
                <br />
                <p class="alert alert-info text-center">
                  Aucun gérant disponible pour le moment.
                </p>
                {% endif %}
              </div>
            </div>

            <div class="col-lg-6 col-md-6">
              <br />
              <header class="section-header">
                <h4 class="text-right stitre" style="color: #555">Clients</h4>
              </header>
              <div class="container containeurs">
                {% if lst_clt %}
                <table class="table table-responsive">
                  <tbody>
                    {% for clt in lst_clt %}
                    <tr>
                      <th scope="row">{{forloop.counter}}</th>
                      <td>{{clt.nom|truncatewords:1}}</td>
                      <td>{{clt.prenoms|truncatewords:1}}</td>
                      <td>{{clt.telephone_p}}</td>
                      <td>
                        <a
                          href="{% url 'details_client' clt.id %}"
                          title="Détails de {{clt.nom}} {{clt.prenoms}}"
                          ><i class="bi bi-info-circle info"></i>
                        </a>
                      </td>
                      <td>
                        <a
                          href="{% url 'retirer_client' pt.id clt.id %}"
                          title="Supprimer définitivement"
                          ><i class="bi bi-x-circle delete"></i
                        ></a>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                {% else %}
                <br />
                <p class="alert alert-info text-center">
                  Aucun client disponible pour le moment.
                </p>
                {% endif %}
              </div>
            </div>

            <div class="col-lg-6 col-md-6">
              <br/>
              <header class="section-header">
                <h4 class="text-right stitre" style="color: #555">Stock (Entrées)</h4>
              </header>
              <div class="container containeurs">
                {% if lst_histo %}
                <table class="table table-responsive">
                  <tbody>
                    {% for histo in lst_histo %}
                    <tr>
                      <th scope="row">{{forloop.counter}}</th>
                      <td>{{histo.produit.designation}}</td>
                      <td>{{histo.qte}}</td>
                      <td>{{histo.admin}}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                {% else %}
                <br />
                <p class="alert alert-info text-center">
                  Aucune historique disponible pour le moment.
                </p>
                {% endif %}
              </div>
            </div>
            <div class="col-lg-6 col-md-6">
              <br/>
              <header class="section-header">
                <h4 class="text-right stitre" style="color: #555">Ventes</h4>
              </header>
              <div class="container containeurs">
                {% if lst_vte %}
                <table class="table table-responsive">
                  <tbody>
                    {% for vte in lst_vte %}
                      <tr>
                        <th scope="row">{{forloop.counter}}</th>
                        {% if vte.client == None %}
                          <td>Client Supprimé</td>
                        {% else %}
                          <td>{{vte.client}}</td>
                        {% endif %}
                        <td>{{vte.montant_net|floatformat:-2}} FCFA</td>
                        <td><a href="{% url 'details_vente' vte.point_vente.id vte.id %}" title="Détails"><i class="bi bi-info-circle info"></i></a></td>
                        <td><a href="{% url 'retirer_vente' pt.id vte.id %}" title="Supprimer définitivement"><i class="bi bi-x-circle delete" id="btnSupVte"></i></a></td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
                {% else %}
                  <br/>
                  <p class="alert alert-info text-center">Aucune vente disponible pour le moment.</p>
                {% endif %}
              </div>
            </div>
            <div class="col-lg-6 col-md-6">
              <br/>
              <header class="section-header">
                <h4 class="text-right stitre" style="color: #555">Stock (Sorties)</h4>
              </header>
              <div class="container containeurs">
                {% if lst_histo_s %}
                <table class="table table-responsive">
                  <tbody>
                    {% for histo in lst_histo_s %}
                    <tr>
                      <th scope="row">{{forloop.counter}}</th>
                      <td>{{histo.produit.designation}}</td>
                      <td>{{histo.qte}}</td>
                      <td>{{histo.date_ajout|date:'d/m/Y'}}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                {% else %}
                <br />
                <p class="alert alert-info text-center">
                  Aucune historique disponible pour le moment.
                </p>
                {% endif %}
              </div>
            </div>
            <div class="col-lg-6 col-md-6">
              <br/>
              <header class="section-header">
                <h4 class="text-right stitre" style="color: #555">Prestations</h4>
              </header>
              <div class="container containeurs">
                {% if lst_prest %}
                <table class="table table-responsive">
                  <tbody>  
                    {% for prest in lst_prest %}
                    <tr>
                      <th scope="row">{{forloop.counter}}</th>
                      {% if prest.client == None %}
                        <td>Client Supprimé</td>
                      {% else %}
                        <td>{{prest.client}}</td>
                      {% endif %}
                      <td>{{prest.total_prestation|floatformat:-2}} FCFA</td>
                      <td><a href="{% url 'details_prestation_pnl' pt.id prest.id %}" title="Détails"><i class="bi bi-info-circle info"></i></a></td>
                      <td><a href="{% url 'retirer_prestation' pt.id prest.id %}" title="Supprimer définitivement"><i class="bi bi-x-circle delete" id="btnSupVte"></i></a></td>
                    </tr>
                    {% endfor %}           
                  </tbody>
                </table>
                {% else %}
                <br />
                <p class="alert alert-info text-center">Aucune prestation disponible pour le moment.</p>
                {% endif %}
              </div>
            </div>
            <hr/>
          </div>
        </div>
        <div class="">
        <br/>
          <div class="row gy-4">
            <div class="col-lg-6 col-md-6 mb-4">
              <div class="component">
                <script src="{% static 'assets/js/chart.min.js' %}"></script>
                {% if lst_prod %}
                   <canvas id="myChart" width="100%" height="100%"></canvas> 
                <script>
                  var lbl_1 = {{lbl_qte_prod|safe}};
                  var data_1 = {{data_qte_prod|safe}};
                  var ctx = document.getElementById("myChart").getContext("2d");
                  var myChart = new Chart(ctx, {
                    type: "bar",
                    data: {
                      labels: lbl_1,
                      datasets: [
                        {
                          label: "Quantité en stock pour {{pt.nom}}",
                          data: data_1,
                          backgroundColor: [
                            "rgba(255, 99, 132, 0.2)",
                            "rgba(54, 162, 235, 0.2)",
                            "rgba(255, 206, 86, 0.2)",
                            "rgba(75, 192, 192, 0.2)",
                            "rgba(153, 102, 255, 0.2)",
                            "rgba(255, 159, 64, 0.2)",
                          ],
                          borderColor: [
                            "rgba(255, 99, 132, 1)",
                            "rgba(54, 162, 235, 1)",
                            "rgba(255, 206, 86, 1)",
                            "rgba(75, 192, 192, 1)",
                            "rgba(153, 102, 255, 1)",
                            "rgba(255, 159, 64, 1)",
                          ],
                          borderWidth: 1,
                        },
                      ],
                    },
                    options: {
                      responsive: true,
                      plugins: {
                        legend: {
                          position: 'bottom',
                        },
                        title: {
                          display: true,
                          text: 'Quantitité en stock'
                        }
                      },
                      scales: {
                        y: {
                          beginAtZero: true,
                        },
                      },
                    },
                  });
                </script>
                {% else %}
                  <br>
                  <p class="alert alert-info text-center">Aucune information disponible pour le moment.</p>
                {% endif %}
              </div>
            </div>

            <div class="col-lg-6 col-md-6 mb-4">
              <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" id="pills-mois-tab" data-toggle="pill" href="#pills-mois" role="tab" aria-controls="pills-mois" aria-selected="false">Mois</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="pills-year-tab" data-toggle="pill" href="#pills-year" role="tab" aria-controls="pills-year" aria-selected="false">Année</a>
                </li>
              </ul>
              <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active mb-4" id="pills-mois" role="tabpanel" aria-labelledby="pills-mois-tab">
                  <div class="component">
                    {% if most_sell_m %}
                      <canvas id="chartMostSellM" width="100%" height="100%"></canvas>
                      <script>
                      var lbl_2 = {{lbl_most_sell_m|safe}};
                      var data_2 = {{data_most_sell_m|safe}};
                      var ctx = document.getElementById("chartMostSellM").getContext("2d");
                      var myChart = new Chart(ctx, {
                        type: "pie",
                        data: {
                          labels: lbl_2,
                          datasets: [
                            {
                              label: "",
                              data: data_2,
                              backgroundColor: [
                                "rgba(255, 99, 132, 0.2)",
                                "rgba(54, 162, 235, 0.2)",
                                "rgba(255, 206, 86, 0.2)",
                                "rgba(75, 192, 192, 0.2)",
                                "rgba(153, 102, 255, 0.2)",
                                "rgba(255, 159, 64, 0.2)",
                              ],
                              borderColor: [
                                "rgba(255, 99, 132, 1)",
                                "rgba(54, 162, 235, 1)",
                                "rgba(255, 206, 86, 1)",
                                "rgba(75, 192, 192, 1)",
                                "rgba(153, 102, 255, 1)",
                                "rgba(255, 159, 64, 1)",
                              ],
                              borderWidth: 1,
                            },
                          ],
                        },
                        options: {
                          responsive: true,
                          plugins: {
                            legend: {
                              position: 'bottom',
                            },
                            title: {
                              display: true,
                              text: 'Produit les plus vendus de {{pt.nom}}'
                            }
                          },
                          scales: {
                            y: {
                              beginAtZero: true,
                            },
                          },
                        },
                      });
                    </script>
                    {% else %}
                      <br>
                      <p class="alert alert-info text-center">Aucun classement disponible pour le moment.</p>
                    {% endif %}
                  </div>
                </div>
                <div class="tab-pane fade" id="pills-year" role="tabpanel" aria-labelledby="pills-year-tab">
                  <div class="component">
                    {% if most_sell_a %}
                      <canvas id="chartMostSellA" width="100%" height="100%"></canvas>
                      <script>
                        var lbl_3 = {{lbl_most_sell_a|safe}};
                        var data_3 = {{data_most_sell_a|safe}};
                        var ctx = document.getElementById("chartMostSellA").getContext("2d");
                        var myChart = new Chart(ctx, {
                          type: "pie",
                          data: {
                            labels: lbl_3,
                            datasets: [
                              {
                                label: "",
                                data: data_3,
                                backgroundColor: [
                                  "rgba(255, 99, 132, 0.2)",
                                  "rgba(54, 162, 235, 0.2)",
                                  "rgba(255, 206, 86, 0.2)",
                                  "rgba(75, 192, 192, 0.2)",
                                  "rgba(153, 102, 255, 0.2)",
                                  "rgba(255, 159, 64, 0.2)",
                                ],
                                borderColor: [
                                  "rgba(255, 99, 132, 1)",
                                  "rgba(54, 162, 235, 1)",
                                  "rgba(255, 206, 86, 1)",
                                  "rgba(75, 192, 192, 1)",
                                  "rgba(153, 102, 255, 1)",
                                  "rgba(255, 159, 64, 1)",
                                ],
                                borderWidth: 1,
                              },
                            ],
                          },
                          options: {
                            responsive: true,
                            plugins: {
                              legend: {
                                position: 'bottom',
                              },
                              title: {
                                display: true,
                                text: 'Produit les plus vendus de {{pt.nom}}'
                              }
                            },
                            scales: {
                              y: {
                                beginAtZero: true,
                              },
                            },
                          },
                        });
                    </script>
                    {% else %}
                      <br>
                      <p class="alert alert-info text-center">Aucun classement disponible pour le moment.</p>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
        
            <div class="col-lg-6 col-md-6 mt-4">
              <ul class="nav nav-pills mb-3" id="pills-tab1" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" id="pills-mois-tab1" data-toggle="pill" href="#pills-mois1" role="tab" aria-controls="pills-mois1" aria-selected="false">Mois</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="pills-year-tab1" data-toggle="pill" href="#pills-year1" role="tab" aria-controls="pills-year1" aria-selected="false">Année</a>
                </li>
              </ul>
              <div class="tab-content" id="pills-tabContent1">
                <div class="tab-pane fade show active mb-4" id="pills-mois1" role="tabpanel" aria-labelledby="pills-mois-tab1">
                  <div class="component">
                    {% if top_clt_nb_m %}
                      <canvas id="topCltNBM" width="100%" height="100%"></canvas>
                      <script>
                        var lbl_3 = {{lbl_top_clt_nb_m|safe}};
                        var data_3 = {{data_top_clt_nb_m|safe}};
                        var ctx = document.getElementById("topCltNBM").getContext("2d");
                        var myChart = new Chart(ctx, {
                          type: "pie",
                          data: {
                            labels: lbl_3,
                            datasets: [
                              {
                                label: "",
                                data: data_3,
                                backgroundColor: [
                                  "rgba(255, 99, 132, 0.2)",
                                  "rgba(3, 252, 140, 0.2)",
                                  "rgba(255, 206, 86, 0.2)",
                                  "rgba(5, 99, 250, 0.2)",
                                  "rgba(153, 102, 255, 0.2)",
                                  "rgba(255, 0, 106, 0.2)",
                                ],
                                borderColor: [
                                  "rgba(255, 99, 132, 1)",
                                  "rgba(3, 252, 140, 1)",
                                  "rgba(255, 206, 86, 1)",
                                  "rgba(5, 99, 250, 1)",
                                  "rgba(153, 102, 255, 1)",
                                  "rgba(255, 0, 106, 1)",
                                ],
                                borderWidth: 1,
                              },
                            ],
                          },
                          options: {
                            responsive: true,
                            plugins: {
                              legend: {
                                position: 'bottom',
                              },
                              title: {
                                display: true,
                                text: 'Top des clients par nombre d\'achat du mois'
                              }
                            },
                            scales: {
                              y: {
                                beginAtZero: true,
                              },
                            },
                          },
                        });
                      </script>
                    {% else %}
                      <br/>
                      <p class="alert alert-info text-center">Aucun classement disponible pour le moment.</p>
                    {% endif %}
                  </div>
                </div>
                <div class="tab-pane fade" id="pills-year1" role="tabpanel" aria-labelledby="pills-year-tab1">
                  <div class="component">
                    {% if top_clt_nb_a %}
                      <canvas id="topCltNBA" width="100%" height="100%"></canvas>
                      <script>
                        var lbl_4 = {{lbl_top_clt_nb_a|safe}};
                        var data_4 = {{data_top_clt_nb_a|safe}};
                        var ctx = document.getElementById("topCltNBA").getContext("2d");
                        var myChart = new Chart(ctx, {
                          type: "pie",
                          data: {
                            labels: lbl_4,
                            datasets: [
                              {
                                label: "",
                                data: data_4,
                                backgroundColor: [
                                  "rgba(255, 99, 132, 0.2)",
                                  "rgba(3, 252, 140, 0.2)",
                                  "rgba(255, 206, 86, 0.2)",
                                  "rgba(5, 99, 250, 0.2)",
                                  "rgba(153, 102, 255, 0.2)",
                                  "rgba(255, 0, 106, 0.2)",
                                ],
                                borderColor: [
                                  "rgba(255, 99, 132, 1)",
                                  "rgba(3, 252, 140, 1)",
                                  "rgba(255, 206, 86, 1)",
                                  "rgba(5, 99, 250, 1)",
                                  "rgba(153, 102, 255, 1)",
                                  "rgba(255, 0, 106, 1)",
                                ],
                                borderWidth: 1,
                              },
                            ],
                          },
                          options: {
                            responsive: true,
                            plugins: {
                              legend: {
                                position: 'bottom',
                              },
                              title: {
                                display: true,
                                text: 'Top des clients par nombre d\'achat de l\'année'
                              }
                            },
                            scales: {
                              y: {
                                beginAtZero: true,
                              },
                            },
                          },
                        });
                      </script>
                    {% else %}
                      <br/>
                      <p class="alert alert-info text-center">Aucun classement disponible pour le moment.</p>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-6 col-md-6 mt-4">
              <ul class="nav nav-pills mb-3" id="pills-tab2" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" id="pills-mois-tab2" data-toggle="pill" href="#pills-mois2" role="tab" aria-controls="pills-mois2" aria-selected="false">Mois</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="pills-year-tab2" data-toggle="pill" href="#pills-year2" role="tab" aria-controls="pills-year2" aria-selected="false">Année</a>
                </li>
              </ul>
              <div class="tab-content" id="pills-tabContent1">
                <div class="tab-pane fade show active mb-4" id="pills-mois2" role="tabpanel" aria-labelledby="pills-mois-tab2">
                  <div class="component">
                    {% if top_clt_mt_m %}
                      <canvas id="topCltMTM" width="100%" height="100%"></canvas>
                      <script>
                        var lbl_5 = {{lbl_top_clt_mt_m|safe}};
                        var data_5 = {{data_top_clt_mt_m|safe}};
                        var ctx = document.getElementById("topCltMTM").getContext("2d");
                        var myChart = new Chart(ctx, {
                          type: "pie",
                          data: {
                            labels: lbl_5,
                            datasets: [
                              {
                                label: "",
                                data: data_5,
                                backgroundColor: [
                                  "rgba(255, 99, 132, 0.2)",
                                  "rgba(3, 252, 140, 0.2)",
                                  "rgba(255, 206, 86, 0.2)",
                                  "rgba(5, 99, 250, 0.2)",
                                  "rgba(153, 102, 255, 0.2)",
                                  "rgba(255, 0, 106, 0.2)",
                                ],
                                borderColor: [
                                  "rgba(255, 99, 132, 1)",
                                  "rgba(3, 252, 140, 1)",
                                  "rgba(255, 206, 86, 1)",
                                  "rgba(5, 99, 250, 1)",
                                  "rgba(153, 102, 255, 1)",
                                  "rgba(255, 0, 106, 1)",
                                ],
                                borderWidth: 1,
                              },
                            ],
                          },
                          options: {
                            responsive: true,
                            plugins: {
                              legend: {
                                position: 'bottom',
                              },
                              title: {
                                display: true,
                                text: 'Top des clients par montant d\'achat du mois'
                              }
                            },
                            scales: {
                              y: {
                                beginAtZero: true,
                              },
                            },
                          },
                        });
                      </script>
                    {% else %}
                      <br/>
                      <p class="alert alert-info text-center">Aucun classement disponible pour le moment.</p>
                    {% endif %}
                  </div>
                </div>
                <div class="tab-pane fade" id="pills-year2" role="tabpanel" aria-labelledby="pills-year-tab2">
                  <div class="component">
                    {% if top_clt_mt_a %}
                      <canvas id="topCltMTA" width="100%" height="100%"></canvas>
                      <script>
                        var lbl_6 = {{lbl_top_clt_mt_a|safe}};
                        var data_6 = {{data_top_clt_mt_a|safe}};
                        var ctx = document.getElementById("topCltMTA").getContext("2d");
                        var myChart = new Chart(ctx, {
                          type: "pie",
                          data: {
                            labels: lbl_6,
                            datasets: [
                              {
                                label: "",
                                data: data_6,
                                backgroundColor: [
                                  "rgba(255, 99, 132, 0.2)",
                                  "rgba(3, 252, 140, 0.2)",
                                  "rgba(255, 206, 86, 0.2)",
                                  "rgba(5, 99, 250, 0.2)",
                                  "rgba(153, 102, 255, 0.2)",
                                  "rgba(255, 0, 106, 0.2)",
                                ],
                                borderColor: [
                                  "rgba(255, 99, 132, 1)",
                                  "rgba(3, 252, 140, 1)",
                                  "rgba(255, 206, 86, 1)",
                                  "rgba(5, 99, 250, 1)",
                                  "rgba(153, 102, 255, 1)",
                                  "rgba(255, 0, 106, 1)",
                                ],
                                borderWidth: 1,
                              },
                            ],
                          },
                          options: {
                            responsive: true,
                            plugins: {
                              legend: {
                                position: 'bottom',
                              },
                              title: {
                                display: true,
                                text: 'Top des clients par montant d\'achat de l\'année'
                              }
                            },
                            scales: {
                              y: {
                                beginAtZero: true,
                              },
                            },
                          },
                        });
                      </script>
                    {% else %}
                      <br/>
                      <p class="alert alert-info text-center">Aucun classement disponible pour le moment.</p>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
<script type="text/javascript" src="{% static 'assets/js/jquery-3.5.1.min.js'%}"></script>
<script type="text/javascript">
</script>
{% endblock body %}
